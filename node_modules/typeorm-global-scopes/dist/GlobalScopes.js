"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var typeorm_1 = require("typeorm");
function GlobalScopes(globalScopes, enabled) {
    if (enabled === void 0) { enabled = true; }
    return function (target) {
        var storage = typeorm_1.getMetadataArgsStorage().tables.find(function (table) { return table.target === target; });
        if (storage) {
            storage.scopes = globalScopes;
            storage.scopesEnabled = enabled;
        }
        else {
            throw new Error('Could not find current entity in metadata store, maybe put @GlobalScopes() after @Entity()?');
        }
    };
}
exports.GlobalScopes = GlobalScopes;
function unscoped(connection, target) {
    var metadata = connection.getMetadata(target)
        .tableMetadataArgs;
    metadata.scopesEnabled = false;
    return target;
}
exports.unscoped = unscoped;
//# sourceMappingURL=GlobalScopes.js.map